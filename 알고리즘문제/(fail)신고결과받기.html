<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body></body>
  <script>
    const id_list = ["muzi", "frodo", "apeach", "neo"];
    const report = [
      "muzi frodo",
      "apeach frodo",
      "frodo neo",
      "muzi neo",
      "apeach muzi",
    ];
    const k = 2;
    let reportResult = {};
    let reportedUser = [];
    let answer = [];

    function solution(id_list, report, k) {
      id_list.forEach((user) => {
        let userData = { userReport: [] };

        for (let i = 0; i < report.length; i++) {
          const reportData = report[i].split(" ");

          if (user === reportData[0]) {
            userData.userReport.push(reportData[1]);
          }
        }
        const reportedUserResult = [...new Set(userData.userReport)];
        userData.userReport = reportedUserResult;
        reportResult[user] = userData;
        reportedUser.push(...reportedUserResult);
        if (!reportedUserResult.length) userData.userReport[0] = "none";
        // console.log(reportResult);
      }); //포이치 끝

      const reportedUserArr = reportedUser.sort();
      let reportedUserObj = {};
      let count = 0;
      for (let i = 0; i < reportedUserArr.length; i++) {
        const reportedUserName = reportedUserArr[i];
        if (reportedUserArr[i] === reportedUserArr[i - 1]) {
          reportedUserObj[reportedUserArr[i]].count += 1;
          if (reportedUserObj[reportedUserArr[i]].count === k) {
            reportedUserObj[reportedUserArr[i]].reportedUser = true;
            reportResult[reportedUserArr[i]].reportedUser = true;
          }
        } else {
          reportedUserObj[reportedUserName] = { count: 1 };
        }
      }

      id_list.forEach((user, idx) => {
        let count = 0;

        const userReportArr = reportResult[user].userReport;
        userReportArr.forEach((reported) => {
          if (reportResult[reported]?.reportedUser) {
            count++;
          }
        });
        answer[idx] = count;
      });
      return answer;
    }
    console.log(solution(id_list, report, k));
  </script>
</html>
